<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>15_08_tutorial</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>15_08_tutorial</h1><br/><br /><h1>Today&#39;s menu</h1><br />• Data import<br /><br />◇ Data export<br /><br /><br /><a href=""><img src="images/3-1.png" alt="images/3-1.png" /></a><br /><br />In practical world, we have to<br /><br /><br /><h2>Data import with readr</h2><br /><br /><code><h2>readr</h2></code><h2>: part of the core tidyverse.</h2><br /><div class="codebox"><pre><span style="color:#333333;font-weight:400">library</span><span style="color:#ff9d00;font-weight:400">(</span>tidyverse<span style="color:#ff9d00;font-weight:400">)</span><br /></pre></div><br /><br /><code><h2>readr</h2></code><h2> data import functions</h2><br />• <code>read_csv</code>: reads comma-delimited files.<br /><br />• <code>read_csv2</code>: reads semicolon-separated files<br /><br />• <code>read_tsv</code>: reads tab-delimited files<br /><br />in this tutorial it is talk about only read_csv. remining are same same as it.<br /><br /><br /><h2>  Import data from a .csv file (local machine)</h2><br /><br /><h3>Syntax</h3><br /><div class="codebox"><pre>datasetname <span style="color:#ff9d00;font-weight:400">&lt;-</span> read_csv<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;include_file_path&quot;</span><span style="color:#ff9d00;font-weight:400">)</span></pre></div><code><br /></code><h2>When you run  </h2><code><h2>read_csv</h2></code><h2>, it prints out the names and type of each <br />column.</h2><br /><h2>Switch to R</h2><br /><br /><br /><table style="display:inline-table"><tr><td><a href="EmbeddedFiles/3-student_excel.xlsx">Linked file: student_excel.xlsx </a></td></tr></table><br /><br /><table style="display:inline-table"><tr><td><a href="EmbeddedFiles/3-student_csv.csv">Linked file: student_csv.csv </a></td></tr></table><br /><br /><div class="codebox"><pre><span style="color:#333333;font-weight:400">getwd</span><span style="color:#ff9d00;font-weight:400">()</span><br /><span style="color:#333333;font-weight:400">library</span><span style="color:#ff9d00;font-weight:400">(</span>readr<span style="color:#ff9d00;font-weight:400">)</span><br /><br /><span style="color:#0088ff;font-weight:400">#this method for current working directory file importing.</span><br />student <span style="color:#ff9d00;font-weight:400">&lt;-</span> read_csv<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;student_csv.csv&quot;</span><span style="color:#ff9d00;font-weight:400">)</span> <span style="color:#333333;font-weight:400">View</span><span style="color:#ff9d00;font-weight:400">(</span>student<span style="color:#ff9d00;font-weight:400">)</span><br /><br /><span style="color:#3ad900;font-weight:400">&quot;/home/codummy/Desktop/GoogleRCourse&quot;</span><br /><br /><span style="color:#0088ff;font-weight:400">#directory should be seperated by &#39;/&#39;.</span><br /><br /><span style="color:#0088ff;font-weight:400">#following method used for reading for any directory in your pc. </span><br />student_csv_desktop_r <span style="color:#ff9d00;font-weight:400">&lt;-</span> <br />read_csv<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;/home/codummy/Desktop/GoogleRCourse/student_csv.csv&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br /><br /><span style="color:#333333;font-weight:400">View</span><span style="color:#ff9d00;font-weight:400">(</span>student_csv_desktop_r<span style="color:#ff9d00;font-weight:400">)</span><br /><br />url <span style="color:#ff9d00;font-weight:400">&lt;-</span> <span style="color:#3ad900;font-weight:400">&quot;https://thiyanga.netlify.app/project/datasets/foodlabel.csv&quot;</span> <br />foodlabel <span style="color:#ff9d00;font-weight:400">&lt;-</span> read_csv<span style="color:#ff9d00;font-weight:400">(</span>url<span style="color:#ff9d00;font-weight:400">)</span><br /><span style="color:#333333;font-weight:400">View</span><span style="color:#ff9d00;font-weight:400">(</span>foodlabel<span style="color:#ff9d00;font-weight:400">)</span><br /><br /><span style="color:#0088ff;font-weight:400">### creating csv data set and importing to RStudio.</span><br /><span style="color:#0088ff;font-weight:400">#part 1</span><br /><br /><span style="color:#0088ff;font-weight:400">#  go to excel &gt; create a dataset &gt; save as csv file. &gt; </span><br /><span style="color:#0088ff;font-weight:400">#  then import to the current working dirctory.</span><br /><br /><span style="color:#333333;font-weight:400">library</span><span style="color:#ff9d00;font-weight:400">(</span>tidyverse<span style="color:#ff9d00;font-weight:400">)</span><br /><span style="color:#0088ff;font-weight:400">#If the file is saved inside the project folder: </span><br />covid_dataset <span style="color:#ff9d00;font-weight:400">&lt;-</span> read_csv<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;coviddataset.csv&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br />covid_dataset<br /><br /><span style="color:#333333;font-weight:400">library</span><span style="color:#ff9d00;font-weight:400">(</span>magrittr<span style="color:#ff9d00;font-weight:400">)</span> <span style="color:#0088ff;font-weight:400"># to use pipe operator. %&gt;%</span><br />covid_dataset %&gt;%<br />  <span style="color:#333333;font-weight:400">View</span><span style="color:#ff9d00;font-weight:400">()</span><br /><br />covid_dataset %&gt;%<br />  <span style="color:#333333;font-weight:400">summary</span><span style="color:#ff9d00;font-weight:400">()</span><br /><br /><span style="color:#333333;font-weight:400">summary</span><span style="color:#ff9d00;font-weight:400">(</span>covid_dataset<span style="color:#ff9d00;font-weight:400">)</span> <span style="color:#0088ff;font-weight:400"># same as above without pipe operator.</span><br /><br /><span style="color:#333333;font-weight:400">library</span><span style="color:#ff9d00;font-weight:400">(</span>ggplot2<span style="color:#ff9d00;font-weight:400">)</span><br />qplot<span style="color:#ff9d00;font-weight:400">(</span>data=covid_dataset, x=test_result, geom = <span style="color:#3ad900;font-weight:400">&quot;bar&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br /><span style="color:#333333;font-weight:400">table</span><span style="color:#ff9d00;font-weight:400">(</span>covid_dataset$test_result<span style="color:#ff9d00;font-weight:400">)</span><br /><br /></pre></div><br /><br /><br /><br /><h2>Importing csv file from a website</h2><br /><br /><h3>Syntax</h3><br /><div class="codebox"><pre>datasetname <span style="color:#ff9d00;font-weight:400">&lt;-</span> read_csv<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;include url here&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br />url <span style="color:#ff9d00;font-weight:400">&lt;-</span> <span style="color:#3ad900;font-weight:400">&quot;https://thiyanga.netlify.app/project/datasets/foodlabel.csv&quot;</span><br />foodlabel <span style="color:#ff9d00;font-weight:400">&lt;-</span> read_csv<span style="color:#ff9d00;font-weight:400">(</span>url<span style="color:#ff9d00;font-weight:400">)</span><br /><span style="color:#333333;font-weight:400">head</span><span style="color:#ff9d00;font-weight:400">(</span>foodlabel, <span style="color:#ff0044;font-weight:400">1</span><span style="color:#ff9d00;font-weight:400">)</span></pre></div><code><br /></code><br /><h3>Example</h3><br /><code><br /></code># A tibble: 1 x 80<br />  Gender   Age Education Employment Income Housesize children marital fshopper<br />   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;<br />1      1    22         5          4      3         5        2       0        0<br /># … with 71 more variables: mplanner &lt;dbl&gt;, place &lt;dbl&gt;, FA &lt;dbl&gt;,<br /><br /><br /><br /><span style="color:#986a44;">read.csv and read_csv</span><br /><br />• read.csv is in base R.<br /><br />• read_csv is in tidyverse.<br /><br />• read.csv() performs a similar job to read_csv().<br /><br />• read_csv() works well with other parts of the tidyverse.<br /><br />• read_csv() is faster than read.csv().<br /><br />• read_csv() will always read variables containing text as character variable. <br />   In contrast, the base R function read.csv() will, by default, convert any character <br />   variable to a factor.<br />		 This behavior can be controlled using the <code>stringsAsFactors</code> argument. <br />		If set to <code>FALSE</code>, it will read text variables as characters instead of factors.<br /><br /><div class="codebox"><pre>covid_dataset <span style="color:#ff9d00;font-weight:400">&lt;-</span> <span style="color:#333333;font-weight:400">read.csv</span><span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;path/to/your/file.csv&quot;</span>, stringsAsFactors = <span style="color:#ff0044;font-weight:400">FALSE</span><span style="color:#ff9d00;font-weight:400">)</span><br /></pre></div><br /><br /><br /><br /><strong><h2>Writing data to a .csv file</h2></strong><br /><br />• We can save tibble (or dataframe) to a csv file, using write_csv().<br /><br />• write_csv() is in the readr package.<br /><br /><br /><br /><h2>Syntax</h2><br /><div class="codebox"><pre>write_csv<span style="color:#ff9d00;font-weight:400">(</span>name_of_the_data_set_you_want_to_save, <span style="color:#3ad900;font-weight:400">&quot;path_to_write_to&quot;</span><span style="color:#ff9d00;font-weight:400">)</span></pre></div><code><br /></code><br /><h2>Example</h2><br /><div class="codebox"><pre><span style="color:#333333;font-weight:400">data</span><span style="color:#ff9d00;font-weight:400">(</span>iris<span style="color:#ff9d00;font-weight:400">)</span><br /><span style="color:#0088ff;font-weight:400"># This will save inside your project folder</span><br />write_csv<span style="color:#ff9d00;font-weight:400">(</span>iris, <span style="color:#3ad900;font-weight:400">&quot;iris.csv&quot;</span><span style="color:#ff9d00;font-weight:400">)</span> <br /><span style="color:#0088ff;font-weight:400"># This will save inside the data folder which is inside your project folder</span><br />write_csv<span style="color:#ff9d00;font-weight:400">(</span>iris, <span style="color:#3ad900;font-weight:400">&quot;data/iris.csv&quot;</span><span style="color:#ff9d00;font-weight:400">)</span></pre></div><code><br /></code><br /><br /><br /><h1>Importing data from .xlsx files</h1><br /><br /><h2>Syntax</h2><br /><div class="codebox"><pre><span style="color:#333333;font-weight:400">library</span><span style="color:#ff9d00;font-weight:400">(</span>readxl<span style="color:#ff9d00;font-weight:400">)</span><br />mydata <span style="color:#ff9d00;font-weight:400">&lt;-</span> read_xlsx<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;file_path&quot;</span><span style="color:#ff9d00;font-weight:400">)</span></pre></div><code><br /></code><br /><br />otherwise you can right click on the excel file under the files tab.<br />then choose import excel file and copy code and run it. :)<br /><br /><br /><h1>Importing SAS, SPSS and STATA files</h1><br /><br /><h2>SAS</h2><br /><div class="codebox"><pre>read_sas<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;mtcars.sas7bdat&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br />write_sas<span style="color:#ff9d00;font-weight:400">(</span>mtcars, <span style="color:#3ad900;font-weight:400">&quot;mtcars.sas7bdat&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br /></pre></div><br /><br /><h2>SPSS</h2><br /><div class="codebox"><pre>read_sav<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;mtcars.sav&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br />write_sav<span style="color:#ff9d00;font-weight:400">(</span>mtcars, <span style="color:#3ad900;font-weight:400">&quot;mtcars.sav&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br /></pre></div><br /><h2>Stata</h2><br /><div class="codebox"><pre>read_dta<span style="color:#ff9d00;font-weight:400">(</span><span style="color:#3ad900;font-weight:400">&quot;mtcars.dta&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br />write_dta<span style="color:#ff9d00;font-weight:400">(</span>mtcars, <span style="color:#3ad900;font-weight:400">&quot;mtcars.dta&quot;</span><span style="color:#ff9d00;font-weight:400">)</span><br /></pre></div><br /><br /><br /><h1>Importing other types of data</h1><br />• <code>feather</code>: for sharing with Python and other languages<br /><br />• <code>httr</code>: for web apis<br /><br />• <code>jsonlite</code>: for JSON<br /><br />• <code>rvest</code>: for web scraping<br /><br />• <code>xml2</code>: for XML<br /><br /><br /><h2>Working with feather, httr, jsonlite, rvest and xml2 is <br />beyond the scope of the course.</h2><br /><br /></div>
</body>
</html>
